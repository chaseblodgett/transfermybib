{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Replies(_ref){let{postId}=_ref;const[replies,setReplies]=useState([]);const[loadingReplies,setLoadingReplies]=useState(false);const[user,setuser]=useState(\"\");const[replyMessage,setReplyMessage]=useState(\"\");const[showReplyForm,setShowReplyForm]=useState(false);// Track form visibility\nconst fetchReplies=async()=>{setLoadingReplies(true);try{const response=await fetch(`/replies/${postId}`);const data=await response.json();setReplies(data||[]);}catch(error){console.error(`Error fetching replies for post ${postId}:`,error);setReplies([]);}finally{setLoadingReplies(false);}};useEffect(()=>{fetchReplies();},[postId]);const handleAddReply=async e=>{e.preventDefault();if(!user||!replyMessage){alert(\"Please fill out both fields.\");return;}const newReply={postId,user,message:replyMessage};try{const response=await fetch(`/replies/${postId}`,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(newReply)});if(response.ok){const savedReply=await response.json();setReplies(prevReplies=>[...prevReplies,savedReply]);setuser(\"\");setReplyMessage(\"\");setShowReplyForm(false);// Optionally hide the form after submitting\n}else{console.error(\"Error saving reply:\",response.statusText);}}catch(error){console.error(\"Error saving reply:\",error);}};const formatDateTime=isoString=>{const date=new Date(isoString);return date.toLocaleString();// Format the date/time in a readable format\n};return/*#__PURE__*/_jsxs(\"div\",{style:styles.repliesContainer,children:[loadingReplies?/*#__PURE__*/_jsx(\"p\",{children:\"Loading replies...\"}):replies.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No replies yet.\"}):replies.map(reply=>/*#__PURE__*/_jsxs(\"div\",{style:styles.replyCard,children:[/*#__PURE__*/_jsx(\"p\",{style:styles.replyMessage,children:reply.message}),/*#__PURE__*/_jsxs(\"div\",{style:styles.replyMeta,children:[/*#__PURE__*/_jsx(\"span\",{style:styles.replyUser,children:reply.user}),reply.createdAt&&/*#__PURE__*/_jsx(\"span\",{style:styles.replyTimestamp,children:formatDateTime(reply.createdAt)})]})]},reply._id)),!showReplyForm&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowReplyForm(true),style:styles.replyButton,children:\"New Reply\"}),showReplyForm&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddReply,style:styles.replyForm,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Your name\",value:user,onChange:e=>setuser(e.target.value),style:styles.input}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Write a reply...\",value:replyMessage,onChange:e=>setReplyMessage(e.target.value),style:styles.textarea}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:styles.submitButton,children:\"Add Reply\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowReplyForm(false),style:styles.cancelButton,children:\"Cancel\"})]})]});}const styles={repliesContainer:{marginTop:\"10px\",marginLeft:\"20px\",display:\"flex\",flexDirection:\"column\",gap:\"10px\"},replyButton:{marginBottom:\"5px\",backgroundColor:\"#A5CBC3\",color:\"#353839\",border:\"none\",padding:\"5px 5px\",borderRadius:\"5px\",cursor:\"pointer\",height:\"100%\"},replyCard:{backgroundColor:\"#e9ecef\",border:\"1px solid #ddd\",borderRadius:\"5px\",padding:\"10px\"},replyMessage:{margin:\"0 0 5px\"},replyMeta:{display:\"flex\",justifyContent:\"space-between\",fontSize:\"0.9rem\",color:\"#555\"},replyUser:{fontWeight:\"bold\"},replyTimestamp:{fontStyle:\"italic\",fontSize:\"0.8rem\",color:\"#888\",marginLeft:\"10px\"},replyForm:{margin:\"20px 5px\",display:\"flex\",flexDirection:\"column\",gap:\"10px\"},input:{padding:\"10px\",fontSize:\"1rem\",borderRadius:\"5px\",border:\"1px solid #ddd\"},textarea:{padding:\"10px\",fontSize:\"1rem\",borderRadius:\"5px\",border:\"1px solid #ddd\",minHeight:\"80px\"},submitButton:{backgroundColor:\"#A5CBC3\",color:\"#353839\",border:\"none\",padding:\"10px\",borderRadius:\"5px\",cursor:\"pointer\"},cancelButton:{color:\"#A5CBC3\",backgroundColor:\"#353839\",border:\"1px solid #ccc\",padding:\"10px\",borderRadius:\"5px\",cursor:\"pointer\"}};export default Replies;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Replies","_ref","postId","replies","setReplies","loadingReplies","setLoadingReplies","user","setuser","replyMessage","setReplyMessage","showReplyForm","setShowReplyForm","fetchReplies","response","fetch","data","json","error","console","handleAddReply","e","preventDefault","alert","newReply","message","method","headers","body","JSON","stringify","ok","savedReply","prevReplies","statusText","formatDateTime","isoString","date","Date","toLocaleString","style","styles","repliesContainer","children","length","map","reply","replyCard","replyMeta","replyUser","createdAt","replyTimestamp","_id","onClick","replyButton","onSubmit","replyForm","type","placeholder","value","onChange","target","input","textarea","submitButton","cancelButton","marginTop","marginLeft","display","flexDirection","gap","marginBottom","backgroundColor","color","border","padding","borderRadius","cursor","height","margin","justifyContent","fontSize","fontWeight","fontStyle","minHeight"],"sources":["/Users/chaseblodgett/Documents/Projects/transfermybib/frontend/src/components/Replies.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nfunction Replies({ postId }) {\n  const [replies, setReplies] = useState([]);\n  const [loadingReplies, setLoadingReplies] = useState(false);\n  const [user, setuser] = useState(\"\");\n  const [replyMessage, setReplyMessage] = useState(\"\");\n  const [showReplyForm, setShowReplyForm] = useState(false); // Track form visibility\n\n  const fetchReplies = async () => {\n    setLoadingReplies(true);\n    try {\n      const response = await fetch(`/replies/${postId}`);\n      const data = await response.json();\n      setReplies(data || []);\n    } catch (error) {\n      console.error(`Error fetching replies for post ${postId}:`, error);\n      setReplies([]);\n    } finally {\n      setLoadingReplies(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchReplies();\n  }, [postId]);\n\n  const handleAddReply = async (e) => {\n    e.preventDefault();\n    if (!user || !replyMessage) {\n      alert(\"Please fill out both fields.\");\n      return;\n    }\n\n    const newReply = {\n      postId,\n      user,\n      message: replyMessage,\n    };\n\n    try {\n      const response = await fetch(`/replies/${postId}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(newReply),\n      });\n\n      if (response.ok) {\n        const savedReply = await response.json();\n        setReplies((prevReplies) => [...prevReplies, savedReply]);\n        setuser(\"\");\n        setReplyMessage(\"\");\n        setShowReplyForm(false); // Optionally hide the form after submitting\n      } else {\n        console.error(\"Error saving reply:\", response.statusText);\n      }\n    } catch (error) {\n      console.error(\"Error saving reply:\", error);\n    }\n  };\n\n  const formatDateTime = (isoString) => {\n    const date = new Date(isoString);\n    return date.toLocaleString(); // Format the date/time in a readable format\n  };\n\n  return (\n    <div style={styles.repliesContainer}>\n      {loadingReplies ? (\n        <p>Loading replies...</p>\n      ) : replies.length === 0 ? (\n        <p>No replies yet.</p>\n      ) : (\n        replies.map((reply) => (\n          <div key={reply._id} style={styles.replyCard}>\n            <p style={styles.replyMessage}>{reply.message}</p>\n            <div style={styles.replyMeta}>\n              <span style={styles.replyUser}>{reply.user}</span>\n              {reply.createdAt && (\n                <span style={styles.replyTimestamp}>{formatDateTime(reply.createdAt)}</span>\n              )}\n            </div>\n          </div>\n        ))\n      )}\n\n      {!showReplyForm && (\n        <button\n          onClick={() => setShowReplyForm(true)}\n          style={styles.replyButton}\n        >\n          New Reply\n        </button>\n      )}\n\n      {showReplyForm && (\n        <form onSubmit={handleAddReply} style={styles.replyForm}>\n          <input\n            type=\"text\"\n            placeholder=\"Your name\"\n            value={user}\n            onChange={(e) => setuser(e.target.value)}\n            style={styles.input}\n          />\n          <textarea\n            placeholder=\"Write a reply...\"\n            value={replyMessage}\n            onChange={(e) => setReplyMessage(e.target.value)}\n            style={styles.textarea}\n          />\n          <button type=\"submit\" style={styles.submitButton}>\n            Add Reply\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => setShowReplyForm(false)}\n            style={styles.cancelButton}\n          >\n            Cancel\n          </button>\n        </form>\n      )}\n    </div>\n  );\n}\n\nconst styles = {\n  repliesContainer: {\n    marginTop: \"10px\",\n    marginLeft: \"20px\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: \"10px\",\n  },\n  replyButton: {\n    marginBottom: \"5px\",\n    backgroundColor: \"#A5CBC3\",\n    color: \"#353839\",\n    border: \"none\",\n    padding: \"5px 5px\",\n    borderRadius: \"5px\",\n    cursor: \"pointer\",\n    height: \"100%\"\n  },\n  replyCard: {\n    backgroundColor: \"#e9ecef\",\n    border: \"1px solid #ddd\",\n    borderRadius: \"5px\",\n    padding: \"10px\",\n  },\n  replyMessage: {\n    margin: \"0 0 5px\",\n  },\n  replyMeta: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    fontSize: \"0.9rem\",\n    color: \"#555\",\n  },\n  replyUser: {\n    fontWeight: \"bold\",\n  },\n  replyTimestamp: {\n    fontStyle: \"italic\",\n    fontSize: \"0.8rem\",\n    color: \"#888\",\n    marginLeft: \"10px\",\n  },\n  replyForm: {\n    margin: \"20px 5px\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: \"10px\",\n  },\n  input: {\n    padding: \"10px\",\n    fontSize: \"1rem\",\n    borderRadius: \"5px\",\n    border: \"1px solid #ddd\",\n  },\n  textarea: {\n    padding: \"10px\",\n    fontSize: \"1rem\",\n    borderRadius: \"5px\",\n    border: \"1px solid #ddd\",\n    minHeight: \"80px\",\n  },\n  submitButton: {\n    backgroundColor: \"#A5CBC3\",\n    color: \"#353839\",\n    border: \"none\",\n    padding: \"10px\",\n    borderRadius: \"5px\",\n    cursor: \"pointer\",\n  },\n  cancelButton: {\n    color: \"#A5CBC3\",\n    backgroundColor: \"#353839\",\n    border: \"1px solid #ccc\",\n    padding: \"10px\",\n    borderRadius: \"5px\",\n    cursor: \"pointer\",\n  },\n};\n\nexport default Replies;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnD,QAAS,CAAAC,OAAOA,CAAAC,IAAA,CAAa,IAAZ,CAAEC,MAAO,CAAC,CAAAD,IAAA,CACzB,KAAM,CAACE,OAAO,CAAEC,UAAU,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACW,cAAc,CAAEC,iBAAiB,CAAC,CAAGZ,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAACa,IAAI,CAAEC,OAAO,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACe,YAAY,CAAEC,eAAe,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACiB,aAAa,CAAEC,gBAAgB,CAAC,CAAGlB,QAAQ,CAAC,KAAK,CAAC,CAAE;AAE3D,KAAM,CAAAmB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/BP,iBAAiB,CAAC,IAAI,CAAC,CACvB,GAAI,CACF,KAAM,CAAAQ,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,YAAYb,MAAM,EAAE,CAAC,CAClD,KAAM,CAAAc,IAAI,CAAG,KAAM,CAAAF,QAAQ,CAACG,IAAI,CAAC,CAAC,CAClCb,UAAU,CAACY,IAAI,EAAI,EAAE,CAAC,CACxB,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,mCAAmChB,MAAM,GAAG,CAAEgB,KAAK,CAAC,CAClEd,UAAU,CAAC,EAAE,CAAC,CAChB,CAAC,OAAS,CACRE,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CACF,CAAC,CAEDX,SAAS,CAAC,IAAM,CACdkB,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,CAACX,MAAM,CAAC,CAAC,CAEZ,KAAM,CAAAkB,cAAc,CAAG,KAAO,CAAAC,CAAC,EAAK,CAClCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAI,CAACf,IAAI,EAAI,CAACE,YAAY,CAAE,CAC1Bc,KAAK,CAAC,8BAA8B,CAAC,CACrC,OACF,CAEA,KAAM,CAAAC,QAAQ,CAAG,CACftB,MAAM,CACNK,IAAI,CACJkB,OAAO,CAAEhB,YACX,CAAC,CAED,GAAI,CACF,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,YAAYb,MAAM,EAAE,CAAE,CACjDwB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACN,QAAQ,CAC/B,CAAC,CAAC,CAEF,GAAIV,QAAQ,CAACiB,EAAE,CAAE,CACf,KAAM,CAAAC,UAAU,CAAG,KAAM,CAAAlB,QAAQ,CAACG,IAAI,CAAC,CAAC,CACxCb,UAAU,CAAE6B,WAAW,EAAK,CAAC,GAAGA,WAAW,CAAED,UAAU,CAAC,CAAC,CACzDxB,OAAO,CAAC,EAAE,CAAC,CACXE,eAAe,CAAC,EAAE,CAAC,CACnBE,gBAAgB,CAAC,KAAK,CAAC,CAAE;AAC3B,CAAC,IAAM,CACLO,OAAO,CAACD,KAAK,CAAC,qBAAqB,CAAEJ,QAAQ,CAACoB,UAAU,CAAC,CAC3D,CACF,CAAE,MAAOhB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAC7C,CACF,CAAC,CAED,KAAM,CAAAiB,cAAc,CAAIC,SAAS,EAAK,CACpC,KAAM,CAAAC,IAAI,CAAG,GAAI,CAAAC,IAAI,CAACF,SAAS,CAAC,CAChC,MAAO,CAAAC,IAAI,CAACE,cAAc,CAAC,CAAC,CAAE;AAChC,CAAC,CAED,mBACExC,KAAA,QAAKyC,KAAK,CAAEC,MAAM,CAACC,gBAAiB,CAAAC,QAAA,EACjCtC,cAAc,cACbR,IAAA,MAAA8C,QAAA,CAAG,oBAAkB,CAAG,CAAC,CACvBxC,OAAO,CAACyC,MAAM,GAAK,CAAC,cACtB/C,IAAA,MAAA8C,QAAA,CAAG,iBAAe,CAAG,CAAC,CAEtBxC,OAAO,CAAC0C,GAAG,CAAEC,KAAK,eAChB/C,KAAA,QAAqByC,KAAK,CAAEC,MAAM,CAACM,SAAU,CAAAJ,QAAA,eAC3C9C,IAAA,MAAG2C,KAAK,CAAEC,MAAM,CAAChC,YAAa,CAAAkC,QAAA,CAAEG,KAAK,CAACrB,OAAO,CAAI,CAAC,cAClD1B,KAAA,QAAKyC,KAAK,CAAEC,MAAM,CAACO,SAAU,CAAAL,QAAA,eAC3B9C,IAAA,SAAM2C,KAAK,CAAEC,MAAM,CAACQ,SAAU,CAAAN,QAAA,CAAEG,KAAK,CAACvC,IAAI,CAAO,CAAC,CACjDuC,KAAK,CAACI,SAAS,eACdrD,IAAA,SAAM2C,KAAK,CAAEC,MAAM,CAACU,cAAe,CAAAR,QAAA,CAAER,cAAc,CAACW,KAAK,CAACI,SAAS,CAAC,CAAO,CAC5E,EACE,CAAC,GAPEJ,KAAK,CAACM,GAQX,CACN,CACF,CAEA,CAACzC,aAAa,eACbd,IAAA,WACEwD,OAAO,CAAEA,CAAA,GAAMzC,gBAAgB,CAAC,IAAI,CAAE,CACtC4B,KAAK,CAAEC,MAAM,CAACa,WAAY,CAAAX,QAAA,CAC3B,WAED,CAAQ,CACT,CAEAhC,aAAa,eACZZ,KAAA,SAAMwD,QAAQ,CAAEnC,cAAe,CAACoB,KAAK,CAAEC,MAAM,CAACe,SAAU,CAAAb,QAAA,eACtD9C,IAAA,UACE4D,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,WAAW,CACvBC,KAAK,CAAEpD,IAAK,CACZqD,QAAQ,CAAGvC,CAAC,EAAKb,OAAO,CAACa,CAAC,CAACwC,MAAM,CAACF,KAAK,CAAE,CACzCnB,KAAK,CAAEC,MAAM,CAACqB,KAAM,CACrB,CAAC,cACFjE,IAAA,aACE6D,WAAW,CAAC,kBAAkB,CAC9BC,KAAK,CAAElD,YAAa,CACpBmD,QAAQ,CAAGvC,CAAC,EAAKX,eAAe,CAACW,CAAC,CAACwC,MAAM,CAACF,KAAK,CAAE,CACjDnB,KAAK,CAAEC,MAAM,CAACsB,QAAS,CACxB,CAAC,cACFlE,IAAA,WAAQ4D,IAAI,CAAC,QAAQ,CAACjB,KAAK,CAAEC,MAAM,CAACuB,YAAa,CAAArB,QAAA,CAAC,WAElD,CAAQ,CAAC,cACT9C,IAAA,WACE4D,IAAI,CAAC,QAAQ,CACbJ,OAAO,CAAEA,CAAA,GAAMzC,gBAAgB,CAAC,KAAK,CAAE,CACvC4B,KAAK,CAAEC,MAAM,CAACwB,YAAa,CAAAtB,QAAA,CAC5B,QAED,CAAQ,CAAC,EACL,CACP,EACE,CAAC,CAEV,CAEA,KAAM,CAAAF,MAAM,CAAG,CACbC,gBAAgB,CAAE,CAChBwB,SAAS,CAAE,MAAM,CACjBC,UAAU,CAAE,MAAM,CAClBC,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,QAAQ,CACvBC,GAAG,CAAE,MACP,CAAC,CACDhB,WAAW,CAAE,CACXiB,YAAY,CAAE,KAAK,CACnBC,eAAe,CAAE,SAAS,CAC1BC,KAAK,CAAE,SAAS,CAChBC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,SAAS,CAClBC,YAAY,CAAE,KAAK,CACnBC,MAAM,CAAE,SAAS,CACjBC,MAAM,CAAE,MACV,CAAC,CACD/B,SAAS,CAAE,CACTyB,eAAe,CAAE,SAAS,CAC1BE,MAAM,CAAE,gBAAgB,CACxBE,YAAY,CAAE,KAAK,CACnBD,OAAO,CAAE,MACX,CAAC,CACDlE,YAAY,CAAE,CACZsE,MAAM,CAAE,SACV,CAAC,CACD/B,SAAS,CAAE,CACToB,OAAO,CAAE,MAAM,CACfY,cAAc,CAAE,eAAe,CAC/BC,QAAQ,CAAE,QAAQ,CAClBR,KAAK,CAAE,MACT,CAAC,CACDxB,SAAS,CAAE,CACTiC,UAAU,CAAE,MACd,CAAC,CACD/B,cAAc,CAAE,CACdgC,SAAS,CAAE,QAAQ,CACnBF,QAAQ,CAAE,QAAQ,CAClBR,KAAK,CAAE,MAAM,CACbN,UAAU,CAAE,MACd,CAAC,CACDX,SAAS,CAAE,CACTuB,MAAM,CAAE,UAAU,CAClBX,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,QAAQ,CACvBC,GAAG,CAAE,MACP,CAAC,CACDR,KAAK,CAAE,CACLa,OAAO,CAAE,MAAM,CACfM,QAAQ,CAAE,MAAM,CAChBL,YAAY,CAAE,KAAK,CACnBF,MAAM,CAAE,gBACV,CAAC,CACDX,QAAQ,CAAE,CACRY,OAAO,CAAE,MAAM,CACfM,QAAQ,CAAE,MAAM,CAChBL,YAAY,CAAE,KAAK,CACnBF,MAAM,CAAE,gBAAgB,CACxBU,SAAS,CAAE,MACb,CAAC,CACDpB,YAAY,CAAE,CACZQ,eAAe,CAAE,SAAS,CAC1BC,KAAK,CAAE,SAAS,CAChBC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,MAAM,CACfC,YAAY,CAAE,KAAK,CACnBC,MAAM,CAAE,SACV,CAAC,CACDZ,YAAY,CAAE,CACZQ,KAAK,CAAE,SAAS,CAChBD,eAAe,CAAE,SAAS,CAC1BE,MAAM,CAAE,gBAAgB,CACxBC,OAAO,CAAE,MAAM,CACfC,YAAY,CAAE,KAAK,CACnBC,MAAM,CAAE,SACV,CACF,CAAC,CAED,cAAe,CAAA7E,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}